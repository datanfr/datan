var currentFocus=-1;function debounce(n,r){let c;return function(){let e=this,t=arguments;clearTimeout(c),c=setTimeout(()=>n.apply(e,t),r)}}function searchQuery(){var e=this.value;0<e.length?(fetch("search_api?q="+e).then(e=>e.json()).then(e=>{document.getElementById("search-results-bloc").style.display="block";let n=document.getElementById("search-results-list");n.innerHTML="",currentFocus=-1,document.getElementById("more-results-link").classList.remove("active"),0<e.length?(document.getElementById("search-bloc").style.borderBottomLeftRadius="0px",document.getElementById("search-bloc").style.borderBottomRightRadius="0px"):document.getElementById("search-bloc").style.borderRadius="8px",e.forEach(e=>{var t=document.createElement("a");t.innerHTML=e.text,t.className=e.source+" no-decoration",t.href=get_base_url()+"/"+e.url,n.appendChild(t)})}),document.getElementById("more-results-link").href="recherche/"+e):closeDropdown()}function addActive(e){if(!e)return!1;removeActive(e),e[currentFocus=(currentFocus=currentFocus>=e.length?0:currentFocus)<0?e.length-1:currentFocus].classList.add("active")}function removeActive(e){for(var t=0;t<e.length;t++)e[t].classList.remove("active")}function closeDropdown(){document.getElementById("search-results-list").innerHTML="",document.getElementById("search-bloc").style.borderRadius="8px",document.getElementById("search-results-bloc").style.display="none",document.getElementById("search").blur()}function clearInput(){document.getElementById("search").value=""}document.getElementById("search").addEventListener("input",debounce(searchQuery,250)),window.addEventListener("click",function(e){e.target.matches("#search")||(closeDropdown(),clearInput())}),window.addEventListener("keydown",function(e){"Escape"===e.key&&(closeDropdown(),clearInput())}),document.getElementById("search").addEventListener("keydown",function(e){var t=(t=document.getElementById("search-results-bloc"))&&t.getElementsByTagName("a"),n=e.key;"ArrowDown"===n||"ArrowUp"===n?(e.preventDefault(),"ArrowDown"===n?(currentFocus++,addActive(t)):"ArrowUp"===n&&(currentFocus--,addActive(t))):"Enter"===n&&(e.preventDefault(),-1===currentFocus?window.location.href="recherche/"+$("#search").val():t[currentFocus].click())});
//# sourceMappingURL=../main.map