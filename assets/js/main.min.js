"use strict";function get_base_url(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname?"http://localhost/datan":"https://datan.fr"}$(document).ready(function(){$("[data-toggle=popover]").popover({placement:"top",container:"body",trigger:"focus",html:!0}),$(".img-lazy").unveil(200,function(){this.onload=function(){$(this).removeClass("placeholder")}})}),$(function(){$("a.pop-me-over").on("click",function(e){return e.preventDefault(),!0}),$(".pop-me-over").popover()}),$(function(){$('[data-toggle="tooltip"]').tooltip()});var filterBanner=$("#filterBanner"),btn=$("#btnup");$(window).scroll(function(){400<$(window).scrollTop()?(btn.addClass("show"),filterBanner.removeClass("d-none").addClass("d-flex")):(btn.removeClass("show"),filterBanner.addClass("d-none").removeClass("d-flex"))}),btn.on("click",function(e){e.preventDefault();$(window).scrollTop(),$(window).scrollTop();$("html, body").animate({scrollTop:0},2e3,"swing")}),$(document).ready(function(){$("#collapseProximity").on("hide.bs.collapse",function(){$("#btn-ranking").html("Voir tout le classement")}),$("#collapseProximity").on("show.bs.collapse",function(){$("#btn-ranking").html("Fermer")})});for(var carouselContainers=document.querySelectorAll(".carousel-container"),i=0;i<carouselContainers.length;i++){var container=carouselContainers[i];initCarouselContainer(container)}function initCarouselContainer(e){var t=e.querySelector(".carousel-cards"),n=new Flickity(t,{prevNextButtons:!1,pageDots:!1,freeScroll:!0,contain:!0});e.querySelector(".carousel--prev").addEventListener("click",function(){n.previous()}),e.querySelector(".carousel--next").addEventListener("click",function(){n.next()})}var cw=$(".no-img").width();function socialWindow(e){var t=(screen.width-570)/2,t="menubar=no,toolbar=no,status=no,width=570,height=570,top="+(screen.height-570)/2+",left="+t;window.open(e,"NewWindow",t)}$(".no-img").css({height:cw+"px"}),function(){var e=document.getElementsByClassName("async_home");Array.from(e).map(function(e){var t=new Image;window.matchMedia("(max-width: 575.98px)").matches||(window.matchMedia("(max-width: 970px)").matches?(t.src=e.dataset.tablet,t.onload=function(){return e.classList.remove("async_home"),"IMG"===e.nodeName?e.src=e.dataset.src:e.style.backgroundImage="linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(".concat(e.dataset.tablet,")")}):(t.src=e.dataset.src,t.onload=function(){return e.classList.remove("async_home"),"IMG"===e.nodeName?e.src=e.dataset.src:e.style.backgroundImage="linear-gradient(130deg, rgba(0, 183, 148, 0.7) 0.65%, rgba(36, 107, 150, 0.7) 112%), url(".concat(e.dataset.src,")")}))})}(),$(function(){var a;$(".read-more-container .btn").click(function(){var e,t=0,n=$(this).parent(),o=2*parseInt(n.css("padding"),10)+n.height();return a=n.parent(),a.children().each(function(){t+=$(this).outerHeight(),e=parseInt($(this).css("margin-bottom"),10)+parseInt($(this).css("margin-top"),10),t+=e}),t-=o,a.css({height:a.height(),"max-height":9999}).animate({height:t}),n.fadeOut(),!1})}),$("#newsletterForm").on("submit",function(e){return e.preventDefault(),$.ajax({url:get_base_url()+"/api/newsletter/create_newsletter",type:"POST",data:$("#newsletterForm").serialize(),dataType:"json",success:function(e){e?($("#newsletterForm").hide(),$("#modalSubscription").show()):($("#newsletterForm").hide(),$("#modalFail").show())},error:function(e){console.log("err",e),$("#newsletterForm").hide(),$("#modalFail").show()}}),!0}),$("#newsletterPage").on("submit",function(e){return e.preventDefault(),$.ajax({url:get_base_url()+"/api/newsletter/create_newsletter",type:"POST",data:$("#newsletterPage").serialize(),dataType:"json",success:function(e){(e?$("#newsletterSuccess"):$("#newsletterFailed")).removeClass("d-none")},error:function(e){console.log("err",e),$("#newsletterFailed").removeClass("d-none")}}),!0}),$("#voteDatanRequestedForm").on("submit",function(e){return e.preventDefault(),$.ajax({url:get_base_url()+"/api/votes/request_vote_datan",type:"POST",data:$("#voteDatanRequestedForm").serialize(),dataType:"json",success:function(e){e?($("#voteDatanRequestedForm").hide(),$("#success").show()):($("#voteDatanRequestedForm").hide(),$("#fail").show())},error:function(e){console.log("err",e),$("#voteDatanRequestedForm").hide(),$("#fail").show()}}),!0}),$(window).on("load",function(){$("#modalExplain").modal("show")}),$("#searchfaq").on("keyup",function(e){$(".card-question").hide();var t=$(this).val().split(" "),n="(?:"+t.join(".*")+"|";t.reverse(),n+=t.join(".*")+")";var o=new RegExp(n,"i");$(".card-question").filter(function(){return o.test($(this).text())}).show()});var pageUrl=encodeURIComponent(document.URL),tweet=encodeURIComponent(jQuery("meta[property='og:description']").attr("content")),whatsappMessage="Je viens de découvrir un nouveau vote de l'Assemblée nationale sur Datan ! Découvre le aussi : "+document.URL;jQuery(".social-share.facebook").on("click",function(){socialWindow("https://www.facebook.com/sharer.php?u="+pageUrl)}),jQuery(".social-share.twitter").on("click",function(){socialWindow("https://twitter.com/intent/tweet?url="+pageUrl+"&text="+tweet)}),jQuery(".social-share.linkedin").on("click",function(){socialWindow("https://www.linkedin.com/sharing/share-offsite/?url="+pageUrl)}),jQuery(".social-share.whatsapp").on("click",function(){socialWindow("whatsapp://send?text="+whatsappMessage)}),$(window).scroll(function(){50<$(document).scrollTop()?($("#navbar-datan").addClass("navbar-shrink"),$(".navbar-brand-img").addClass("shrink")):($("#navbar-datan").removeClass("navbar-shrink"),$(".navbar-brand-img").removeClass("shrink"))});
//# sourceMappingURL=main.map